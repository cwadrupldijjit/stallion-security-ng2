System.register(["angular2/core"],function(t){var e,a,l=this&&this.__decorate||function(t,e,a,l){var s,i=arguments.length,n=3>i?e:null===l?l=Object.getOwnPropertyDescriptor(e,a):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,l);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(n=(3>i?s(n):i>3?s(e,a,n):s(e,a))||n);return i>3&&n&&Object.defineProperty(e,a,n),n},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0};return{setters:[function(t){e=t}],execute:function(){a=function(){function t(t){var e=this;this.name="parallaxDirective",this.cssKey="backgroundPosition",this.parallaxCss="backgroundPositionY",this.parallaxAxis="Y",this.parallaxRatio=-.7,this.parallaxInitVal=0,this.cssUnit="px",this.isSpecialVal=!1,this.evaluateScroll=function(){var t,a;a=e.scrollElement.scrollTop*e.parallaxRatio+e.parallaxInitVal,e.maxValue&&a>=e.maxValue?a=e.maxValue:e.minValue&&a<=e.minValue&&(a=e.minValue),t="backgroundPosition"===e.cssKey?"X"===e.parallaxAxis?a+e.cssUnit+" 0":"0 "+a+e.cssUnit:e.isSpecialVal?e.cssValue+"("+a+e.cssUnit+")":a+e.cssUnit,e.parallaxElement.style[e.cssKey]=t},this.hostElement=t.nativeElement}return t.prototype.ngOnInit=function(){var t;console.log("%s initialized on element",this.name,this.hostElement),console.log(this);for(var e in this.config)this[e]=this.config[e];if(this.parallaxCss=this.parallaxCss?this.parallaxCss:"backgroundPositionY",this.parallaxCss.match(/backgroundPosition/i)&&("X"===this.parallaxCss.split("backgroundPosition")[1].toUpperCase()&&(this.parallaxAxis="X"),this.parallaxCss="backgroundPosition"),t=this.parallaxCss.split(":"),this.cssKey=t[0],this.cssValue=t[1],this.isSpecialVal=this.cssValue?!0:!1,this.cssValue||(this.cssValue=this.cssKey),this.parallaxRatio=+this.parallaxRatio,this.parallaxInitVal=+this.parallaxInitVal,this.parallaxElement=this.parallaxElement||this.hostElement,!this.scrollElement)if(document.getElementById("parallaxScroll"))this.scrollElement=document.getElementById("parallaxScroll");else if(this.scrollerId)try{if(this.scrollElement=document.getElementById(this.scrollerId),!this.scrollElement)throw"The ID passed through the parallaxConfig ('"+this.scrollerId+"') object was not found in the document.  Defaulting to watch scrolling of the body."}catch(a){console.warn(a),this.scrollElement=document.getElementsByTagName("body")[0]}else this.scrollElement=document.getElementsByTagName("body")[0];this.evaluateScroll(),this.scrollElement.addEventListener("scroll",this.evaluateScroll)},l([e.Input(),s("design:type",Object)],t.prototype,"config",void 0),t=l([e.Directive({selector:"[parallax]"}),s("design:paramtypes",[e.ElementRef])],t)}(),t("Parallax",a)}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kaXJlY3RpdmVzL3BhcmFsbGF4L3BhcmFsbGF4LmRpcmVjdGl2ZS5qcyIsImFwcC9kaXJlY3RpdmVzL3BhcmFsbGF4L3BhcmFsbGF4LmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6WyJTeXN0ZW0iLCJyZWdpc3RlciIsImV4cG9ydHNfMSIsImNvcmVfMSIsIlBhcmFsbGF4IiwiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwic2V0dGVycyIsImNvcmVfMV8xIiwiZXhlY3V0ZSIsIlBhcmFsbGF4LmNvbnN0cnVjdG9yIiwiUGFyYWxsYXgubmdPbkluaXQiLCJFbGVtZW50UmVmIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsVUFBVSxpQkFBa0IsU0FBU0MsR0FDeEMsR0FTSUMsR0FDQUMsRUFWQUMsRUFBY0MsTUFBUUEsS0FBS0QsWUFBZSxTQUFVRSxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhDLEVBQUlDLFVBQVVDLE9BQVFDLEVBQVEsRUFBSkgsRUFBUUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpRLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSVUsR0FBSWIsRUFBV08sT0FBUyxFQUFHTSxHQUFLLEVBQUdBLEtBQVNULEVBQUlKLEVBQVdhLE1BQUlMLEdBQVMsRUFBSkgsRUFBUUQsRUFBRUksR0FBS0gsRUFBSSxFQUFJRCxFQUFFSCxFQUFRQyxFQUFL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LFNBQVVBLEtBQUtBLGlCQXZGakQxQixHQUFDQSxFQUFBQSxRRHNDZWtCLEVBQVcsY0FBZU4sU0N0Q2pDWixFQUFBQSxVQUFBQSxTQUFNQSxRQVBuQkEsRUFBQUEsR0FBQ0EsRUFBQUEsV0FDR0EsU0FBVUEsZURrRE1rQixFQUFXLHFCQUFzQm5CLEVBQU80QixjQUN6QzNCLE1DbURYRixFQUFBLFdBQUFFIiwiZmlsZSI6ImFwcC9kaXJlY3RpdmVzL3BhcmFsbGF4L3BhcmFsbGF4LmRpcmVjdGl2ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlN5c3RlbS5yZWdpc3RlcihbJ2FuZ3VsYXIyL2NvcmUnXSwgZnVuY3Rpb24oZXhwb3J0c18xKSB7XG4gICAgdmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgICAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgICAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgICAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgICAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xuICAgIH07XG4gICAgdmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbiAgICB9O1xuICAgIHZhciBjb3JlXzE7XG4gICAgdmFyIFBhcmFsbGF4O1xuICAgIHJldHVybiB7XG4gICAgICAgIHNldHRlcnM6W1xuICAgICAgICAgICAgZnVuY3Rpb24gKGNvcmVfMV8xKSB7XG4gICAgICAgICAgICAgICAgY29yZV8xID0gY29yZV8xXzE7XG4gICAgICAgICAgICB9XSxcbiAgICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBQYXJhbGxheCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUGFyYWxsYXgoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSAncGFyYWxsYXhEaXJlY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNzc0tleSA9ICdiYWNrZ3JvdW5kUG9zaXRpb24nO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFsbGF4Q3NzID0gJ2JhY2tncm91bmRQb3NpdGlvblknO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFsbGF4QXhpcyA9ICdZJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbGxheFJhdGlvID0gLS43O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFsbGF4SW5pdFZhbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3NzVW5pdCA9ICdweCc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTcGVjaWFsVmFsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZhbHVhdGVTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0VmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGNWYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxjVmFsID0gX3RoaXMuc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AgKiBfdGhpcy5wYXJhbGxheFJhdGlvICsgX3RoaXMucGFyYWxsYXhJbml0VmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm1heFZhbHVlICYmIGNhbGNWYWwgPj0gX3RoaXMubWF4VmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsY1ZhbCA9IF90aGlzLm1heFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMubWluVmFsdWUgJiYgY2FsY1ZhbCA8PSBfdGhpcy5taW5WYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxjVmFsID0gX3RoaXMubWluVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY3NzS2V5ID09PSAnYmFja2dyb3VuZFBvc2l0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJhbGxheEF4aXMgPT09ICdYJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRWYWwgPSBjYWxjVmFsICsgX3RoaXMuY3NzVW5pdCArICcgMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRWYWwgPSAnMCAnICsgY2FsY1ZhbCArIF90aGlzLmNzc1VuaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMuaXNTcGVjaWFsVmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0VmFsID0gX3RoaXMuY3NzVmFsdWUgKyAnKCcgKyBjYWxjVmFsICsgX3RoaXMuY3NzVW5pdCArICcpJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFZhbCA9IGNhbGNWYWwgKyBfdGhpcy5jc3NVbml0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyYWxsYXhFbGVtZW50LnN0eWxlW190aGlzLmNzc0tleV0gPSByZXN1bHRWYWw7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBlbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFBhcmFsbGF4LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNzc1ZhbEFycmF5O1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnJXMgaW5pdGlhbGl6ZWQgb24gZWxlbWVudCcsIHRoaXMubmFtZSwgdGhpcy5ob3N0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHRoaXMuY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3Byb3BdID0gdGhpcy5jb25maWdbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbGxheENzcyA9IHRoaXMucGFyYWxsYXhDc3MgPyB0aGlzLnBhcmFsbGF4Q3NzIDogJ2JhY2tncm91bmRQb3NpdGlvblknO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJhbGxheENzcy5tYXRjaCgvYmFja2dyb3VuZFBvc2l0aW9uL2kpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJhbGxheENzcy5zcGxpdCgnYmFja2dyb3VuZFBvc2l0aW9uJylbMV0udG9VcHBlckNhc2UoKSA9PT0gJ1gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbGxheEF4aXMgPSAnWCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFsbGF4Q3NzID0gJ2JhY2tncm91bmRQb3NpdGlvbic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3NzVmFsQXJyYXkgPSB0aGlzLnBhcmFsbGF4Q3NzLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3NzS2V5ID0gY3NzVmFsQXJyYXlbMF07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3NzVmFsdWUgPSBjc3NWYWxBcnJheVsxXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1NwZWNpYWxWYWwgPSB0aGlzLmNzc1ZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3NzVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNzc1ZhbHVlID0gdGhpcy5jc3NLZXk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyYWxsYXhSYXRpbyA9ICt0aGlzLnBhcmFsbGF4UmF0aW87XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyYWxsYXhJbml0VmFsID0gK3RoaXMucGFyYWxsYXhJbml0VmFsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFsbGF4RWxlbWVudCA9IHRoaXMucGFyYWxsYXhFbGVtZW50IHx8IHRoaXMuaG9zdEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zY3JvbGxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcmFsbGF4U2Nyb2xsJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcmFsbGF4U2Nyb2xsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNjcm9sbGVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNjcm9sbGVySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2Nyb2xsRWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIlRoZSBJRCBwYXNzZWQgdGhyb3VnaCB0aGUgcGFyYWxsYXhDb25maWcgKCdcIiArIHRoaXMuc2Nyb2xsZXJJZCArIFwiJykgb2JqZWN0IHdhcyBub3QgZm91bmQgaW4gdGhlIGRvY3VtZW50LiAgRGVmYXVsdGluZyB0byB3YXRjaCBzY3JvbGxpbmcgb2YgdGhlIGJvZHkuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmFsdWF0ZVNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5ldmFsdWF0ZVNjcm9sbCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgY29yZV8xLklucHV0KCksIFxuICAgICAgICAgICAgICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIE9iamVjdClcbiAgICAgICAgICAgICAgICBdLCBQYXJhbGxheC5wcm90b3R5cGUsIFwiY29uZmlnXCIsIHZvaWQgMCk7XG4gICAgICAgICAgICAgICAgUGFyYWxsYXggPSBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgY29yZV8xLkRpcmVjdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1twYXJhbGxheF0nXG4gICAgICAgICAgICAgICAgICAgIH0pLCBcbiAgICAgICAgICAgICAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbY29yZV8xLkVsZW1lbnRSZWZdKVxuICAgICAgICAgICAgICAgIF0sIFBhcmFsbGF4KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyYWxsYXg7XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgZXhwb3J0c18xKFwiUGFyYWxsYXhcIiwgUGFyYWxsYXgpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iLCIvLyBuZzItcGFyYWxsYXhcclxuXHJcbmltcG9ydCB7RGlyZWN0aXZlLCBFbGVtZW50UmVmLCBIb3N0LCBJbnB1dCwgT25Jbml0fSBmcm9tICdhbmd1bGFyMi9jb3JlJztcclxuXHJcbi8qIFxyXG5UaGVzZSBhcmUgb3B0aW9uYWwgdmFsdWVzIHlvdSBjYW4gaW5jbHVkZSBpbiB0aGUgY29uZmlnIG9iamVjdCB5b3UgY2FuIHBhc3MgaW50byB0aGUgXHJcbmRpcmVjdGl2ZSBmb3IgY3VzdG9tIHByb3BlcnRpZXMgeW91IHdhbnQgdG8gdXNlIHRoaXMgd2l0aC4gIFRoaXMgdG9vbCBjYW4gYmUgdXNlZCBmb3IgXHJcbm1vcmUgdGhhbiBqdXN0IHRoZSBwYXJhbGxheCBlZmZlY3QsIGFuZCBpdCBpcyBhYmxlIHRvIHRyYW5zZm9ybSBhbnl0aGluZyBhYm91dCB0aGUgXHJcbltwYXJhbGxheEVsZW1lbnRdIHRoYXQgeW91IHdhbnQgdG8gaGF2ZSBib3VuZCB0byB0aGUgc2Nyb2xsaW5nIG9mIHRoZSBuZXN0ZWQgZWxlbWVudC4gIFxyXG5cclxuKi9cclxuaW50ZXJmYWNlIFBhcmFsbGF4Q29uZmlnIHtcclxuXHQvLyB0aGUgY3NzIHByb3BlcnR5IChjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlKSB0aGF0IHlvdSB3YW50IGNoYW5nZWQgYWxvbmcgd2l0aCB0aGVcclxuXHQvLyB2YWx1ZSB5b3Ugd2FudCB0byBhc3NpZ24gdG8gdGhlIGNzcyBrZXk7IHlvdSBzaG91bGQgdXNlIFBhcmFsbGF4Q3NzIGlmIHlvdSdyZSBcclxuXHQvLyBqdXN0IGRlZmluaW5nIG9uZSBwcm9wZXJ0eSB3aXRob3V0IHNwZWNpYWwgdmFsdWVzXHJcblx0Y3NzS2V5Pzogc3RyaW5nO1xyXG5cdFxyXG5cdC8vIHRoaXMgaXMgdXNlZCB0byBkZWZpbmUgdGhlIGNzcyBwcm9wZXJ0eSB5b3UnZCBsaWtlIHRvIG1vZGlmeSBhcyB5b3Ugc2Nyb2xsXHJcblx0Ly8gZGVmYXVsdCBpcyBiYWNrZ3JvdW5kUG9zaXRpb25ZXHJcblx0cGFyYWxsYXhDc3M/OiBzdHJpbmc7XHJcblx0XHJcblx0Ly8gcmF0aW8gZGVmaW5pbmcgaG93IGZhc3QsIHNsb3csIG9yIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGNoYW5nZXMgb24gc2Nyb2xsaW5nXHJcblx0cGFyYWxsYXhSYXRpbz86IG51bWJlcjtcclxuXHRcclxuXHQvLyB0aGlzIGlzIHRoZSBpbml0aWFsIHZhbHVlIGluIHBpeGVscyBmb3IgdGhlIHBhcmFsbGF4Q3NzIHByb3BlcnR5IHlvdSBkZWZpbmVkXHJcblx0Ly8gYmVmb3JlIG9yLCBpZiB5b3UgZGlkbid0IGRlZmluZSBvbmUsIGl0IGRlZmF1bHRzIHRvIDBcclxuXHRwYXJhbGxheEluaXRWYWw/OiBudW1iZXI7XHJcblx0XHJcblx0Ly8gdGhlIGlkIGZvciB0aGUgZWxlbWVudCBvbiB0aGUgcGFnZSB5b3UnZCBsaWtlIHRvIHRyYWNrIHRoZSBzY3JvbGxpbmcgb2YgaW4gdGhlIFxyXG5cdC8vIGNhc2Ugd2hlcmUgdGhlIGVsZW1lbnQgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBjb21wb25lbnQ7IFxyXG5cdC8vIGlmIG5vIGlkIGlzIGRlZmluZWQgYWxvbmcgd2l0aCBubyBzY3JvbGxFbGVtZW50IGJlbG93LCBcclxuXHQvLyBpdCBkZWZhdWx0cyB0byB0aGUgc2Nyb2xsaW5nIG9mIHRoZSBib2R5XHJcblx0c2Nyb2xsZXJJZD86IHN0cmluZztcclxuXHRcclxuXHQvLyB0aGUgdXBwZXIgY29uc3RyYWludCBmb3IgdGhlIGNzcyB0cmFuc2Zvcm1hdGlvblxyXG5cdG1heFZhbHVlPzogbnVtYmVyO1xyXG5cdFxyXG5cdC8vIHRoZSBsb3dlciBjb25zdHJhaW50IGZvciB0aGUgY3NzIHRyYW5zZm9ybWF0aW9uXHJcblx0bWluVmFsdWU/OiBudW1iZXI7XHJcblx0XHJcblx0Ly8gdGhlIHVuaXQgKGUuZy4gJ3B4JywgJ2VtJywgJyUnLCAndmgnLCBldGMuKSB5b3Ugd2FudCBmb3IgdGhlIHBhcmFsbGF4IGVmZmVjdCB0byB1c2UgXHJcblx0Y3NzVW5pdD86IHN0cmluZztcclxuXHRcclxuXHQvLyB0aGUgZWxlbWVudCBpbiB0aGUgY3VycmVudCBjb21wb25lbnQgdGhhdCB5b3UnZCBsaWtlIHRoZSBkaXJlY3RpdmUgdG8gdHJhY2sgaXRzIFxyXG5cdC8vIHBvc2l0aW9uIGFzIGl0IHNjcm9sbHM7ICBnZXRzIGFzc2lnbmVkIHRvIHRoZSBib2R5IGlmIG5vdGhpbmcgaXMgZGVmaW5lZFxyXG5cdHNjcm9sbEVsZW1lbnQ/OiBIVE1MRWxlbWVudDtcclxuXHRcclxuXHQvLyB0aGUgZWxlbWVudCB0aGF0IHlvdSdkIGxpa2UgdGhlIGVmZmVjdHMgZnJvbSBzY3JvbGxpbmcgdGhlIHNjcm9sbEVsZW1lbnQgYXBwbGllZCBcclxuXHQvLyB0bzsgZXNzZW50aWFsbHkgdGhlIGVsZW1lbnQgdGhhdCBtb3ZlcyBhcyB5b3Ugc2Nyb2xsXHJcblx0cGFyYWxsYXhFbGVtZW50PzogSFRNTEVsZW1lbnQ7XHJcblx0XHJcblx0Ly8gd2hhdCB5b3Ugd2FudCB0byBjYWxsIGl0IHRvIGZpbmQgdGhlIHBhcnRpY3VsYXIgaW5zdGFuY2Ugb2YgaXQgaWYgeW91IG5lZWQgdG8gZGVidWdcclxuXHRuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbcGFyYWxsYXhdJ1xyXG59KVxyXG5cclxuY2xhc3MgUGFyYWxsYXggaW1wbGVtZW50cyBPbkluaXQge1xyXG5cdG5hbWU6IHN0cmluZyA9ICdwYXJhbGxheERpcmVjdGl2ZSc7XHJcblx0XHJcbiAgICBASW5wdXQoKSBjb25maWc6IFBhcmFsbGF4Q29uZmlnO1xyXG4gICAgY3NzS2V5OiBzdHJpbmcgPSAnYmFja2dyb3VuZFBvc2l0aW9uJztcclxuXHRwYXJhbGxheENzczogc3RyaW5nID0gJ2JhY2tncm91bmRQb3NpdGlvblknO1xyXG5cdHBhcmFsbGF4QXhpczogc3RyaW5nID0gJ1knO1xyXG4gICAgcGFyYWxsYXhSYXRpbzogbnVtYmVyID0gLS43O1xyXG4gICAgcGFyYWxsYXhJbml0VmFsOiBudW1iZXIgPSAwO1xyXG5cdHNjcm9sbGVySWQ6IHN0cmluZztcclxuXHRtYXhWYWx1ZTogbnVtYmVyO1xyXG5cdG1pblZhbHVlOiBudW1iZXI7XHJcblx0Y3NzVW5pdDogc3RyaW5nID0gJ3B4JztcclxuXHRcclxuICAgIGNzc1ZhbHVlOiBzdHJpbmc7XHJcbiAgICBpc1NwZWNpYWxWYWw6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRcclxuXHRob3N0RWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblx0c2Nyb2xsRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblx0cGFyYWxsYXhFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHRcclxuXHRwcml2YXRlIGV2YWx1YXRlU2Nyb2xsID0gKCkgPT4ge1xyXG5cdFx0bGV0IHJlc3VsdFZhbDogc3RyaW5nO1xyXG5cdFx0bGV0IGNhbGNWYWw6IG51bWJlcjtcclxuXHRcdFxyXG5cdFx0Y2FsY1ZhbCA9IHRoaXMuc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AgKiB0aGlzLnBhcmFsbGF4UmF0aW8gKyB0aGlzLnBhcmFsbGF4SW5pdFZhbDtcclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMubWF4VmFsdWUgJiYgY2FsY1ZhbCA+PSB0aGlzLm1heFZhbHVlKVxyXG5cdFx0XHRjYWxjVmFsID0gdGhpcy5tYXhWYWx1ZTtcclxuXHRcdGVsc2UgaWYgKHRoaXMubWluVmFsdWUgJiYgY2FsY1ZhbCA8PSB0aGlzLm1pblZhbHVlKVxyXG5cdFx0XHRjYWxjVmFsID0gdGhpcy5taW5WYWx1ZTtcclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMuY3NzS2V5ID09PSAnYmFja2dyb3VuZFBvc2l0aW9uJykge1xyXG5cdFx0XHRpZiAodGhpcy5wYXJhbGxheEF4aXMgPT09ICdYJykge1xyXG5cdFx0XHRcdHJlc3VsdFZhbCA9IGNhbGNWYWwgKyB0aGlzLmNzc1VuaXQgKyAnIDAnO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdFZhbCA9ICcwICcgKyBjYWxjVmFsICsgdGhpcy5jc3NVbml0O1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuaXNTcGVjaWFsVmFsKSB7XHJcblx0XHRcdHJlc3VsdFZhbCA9IHRoaXMuY3NzVmFsdWUgKyAnKCcgKyBjYWxjVmFsICsgdGhpcy5jc3NVbml0ICsgJyknO1xyXG5cdFx0fSBlbHNlIHsgXHJcblx0XHRcdHJlc3VsdFZhbCA9IGNhbGNWYWwgKyB0aGlzLmNzc1VuaXQ7XHJcblx0XHR9XHJcblx0XHR0aGlzLnBhcmFsbGF4RWxlbWVudC5zdHlsZVt0aGlzLmNzc0tleV0gPSByZXN1bHRWYWw7XHJcblx0fVxyXG5cdFxyXG5cdG5nT25Jbml0KCkge1xyXG5cdFx0bGV0IGNzc1ZhbEFycmF5OiBzdHJpbmdbXTtcclxuXHRcdFxyXG5cdFx0Y29uc29sZS5sb2coJyVzIGluaXRpYWxpemVkIG9uIGVsZW1lbnQnLCB0aGlzLm5hbWUsIHRoaXMuaG9zdEVsZW1lbnQpO1xyXG5cdFx0Y29uc29sZS5sb2codGhpcyk7XHJcblx0XHRcclxuXHRcdGZvciAobGV0IHByb3AgaW4gdGhpcy5jb25maWcpIHsgdGhpc1twcm9wXSA9IHRoaXMuY29uZmlnW3Byb3BdOyB9XHJcblx0XHR0aGlzLnBhcmFsbGF4Q3NzID0gdGhpcy5wYXJhbGxheENzcyA/IHRoaXMucGFyYWxsYXhDc3MgOiAnYmFja2dyb3VuZFBvc2l0aW9uWSc7XHJcblx0XHRpZiAodGhpcy5wYXJhbGxheENzcy5tYXRjaCgvYmFja2dyb3VuZFBvc2l0aW9uL2kpKSB7XHJcblx0XHRcdGlmICh0aGlzLnBhcmFsbGF4Q3NzLnNwbGl0KCdiYWNrZ3JvdW5kUG9zaXRpb24nKVsxXS50b1VwcGVyQ2FzZSgpID09PSAnWCcpIHtcclxuXHRcdFx0XHR0aGlzLnBhcmFsbGF4QXhpcyA9ICdYJztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5wYXJhbGxheENzcyA9ICdiYWNrZ3JvdW5kUG9zaXRpb24nO1xyXG5cdFx0fVxyXG5cdFx0XHJcbiAgICAgICAgY3NzVmFsQXJyYXkgPSB0aGlzLnBhcmFsbGF4Q3NzLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgdGhpcy5jc3NLZXkgPSBjc3NWYWxBcnJheVswXTtcclxuICAgICAgICB0aGlzLmNzc1ZhbHVlID0gY3NzVmFsQXJyYXlbMV07XHJcblx0XHRcclxuICAgICAgICB0aGlzLmlzU3BlY2lhbFZhbCA9IHRoaXMuY3NzVmFsdWUgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNzc1ZhbHVlKSB0aGlzLmNzc1ZhbHVlID0gdGhpcy5jc3NLZXk7XHJcblx0XHRcclxuICAgICAgICB0aGlzLnBhcmFsbGF4UmF0aW8gPSArdGhpcy5wYXJhbGxheFJhdGlvO1xyXG4gICAgICAgIHRoaXMucGFyYWxsYXhJbml0VmFsID0gK3RoaXMucGFyYWxsYXhJbml0VmFsO1xyXG5cdFx0XHJcblx0XHR0aGlzLnBhcmFsbGF4RWxlbWVudCA9IHRoaXMucGFyYWxsYXhFbGVtZW50IHx8IHRoaXMuaG9zdEVsZW1lbnQ7XHJcblx0XHRpZiAoIXRoaXMuc2Nyb2xsRWxlbWVudCkge1xyXG5cdFx0XHRpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcmFsbGF4U2Nyb2xsJykpXHJcblx0XHRcdFx0dGhpcy5zY3JvbGxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcmFsbGF4U2Nyb2xsJyk7XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuc2Nyb2xsZXJJZCkge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHR0aGlzLnNjcm9sbEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNjcm9sbGVySWQpO1xyXG5cdFx0XHRcdFx0aWYgKCF0aGlzLnNjcm9sbEVsZW1lbnQpXHJcblx0XHRcdFx0XHRcdHRocm93KGBUaGUgSUQgcGFzc2VkIHRocm91Z2ggdGhlIHBhcmFsbGF4Q29uZmlnICgnJHt0aGlzLnNjcm9sbGVySWR9Jykgb2JqZWN0IHdhcyBub3QgZm91bmQgaW4gdGhlIGRvY3VtZW50LiAgRGVmYXVsdGluZyB0byB3YXRjaCBzY3JvbGxpbmcgb2YgdGhlIGJvZHkuYCk7XHJcblx0XHRcdFx0fSBjYXRjaChlKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oZSk7XHJcblx0XHRcdFx0XHR0aGlzLnNjcm9sbEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHRoaXMuc2Nyb2xsRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHRoaXMuZXZhbHVhdGVTY3JvbGwoKTtcclxuXHRcdFxyXG5cdFx0dGhpcy5zY3JvbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuZXZhbHVhdGVTY3JvbGwpO1xyXG5cdH1cclxuXHRcclxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEVsZW1lbnRSZWYpIHtcclxuXHRcdHRoaXMuaG9zdEVsZW1lbnQgPSBlbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQge1BhcmFsbGF4fSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
